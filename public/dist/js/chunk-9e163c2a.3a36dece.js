(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9e163c2a"],{"2db4":function(t,e,a){"use strict";a("caad"),a("a9e3");var i=a("ade3"),s=(a("ca71"),a("8dd9")),n=a("a9ad"),r=a("7560"),o=a("f2e7"),u=a("fe6c"),l=a("58df"),c=a("80d2"),d=a("d9bd");e["a"]=Object(l["a"])(s["a"],n["a"],o["a"],Object(u["b"])(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:function(t){return"string"===typeof t||!1===t}},vertical:Boolean},data:function(){return{activeTimeout:-1}},computed:{classes:function(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground:function(){return!this.text&&!this.outlined},isDark:function(){return this.hasBackground?!this.light:r["a"].options.computed.isDark.call(this)},styles:function(){if(this.absolute)return{};var t=this.$vuetify.application,e=t.bar,a=t.bottom,i=t.footer,s=t.insetFooter,n=t.left,r=t.right,o=t.top;return{paddingBottom:Object(c["g"])(a+i+s),paddingLeft:this.app?Object(c["g"])(n):void 0,paddingRight:this.app?Object(c["g"])(r):void 0,paddingTop:Object(c["g"])(e+o)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted:function(){this.isActive&&this.setTimeout()},created:function(){this.$attrs.hasOwnProperty("auto-height")&&Object(d["e"])("auto-height",this),0==this.timeout&&Object(d["d"])('timeout="0"',"-1",this)},methods:{genActions:function(){return this.$createElement("div",{staticClass:"v-snack__action "},[Object(c["r"])(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent:function(){return this.$createElement("div",{staticClass:"v-snack__content",class:Object(i["a"])({},this.contentClass,!0),attrs:{role:"status","aria-live":"polite"}},[Object(c["r"])(this)])},genWrapper:function(){var t=this.hasBackground?this.setBackgroundColor:this.setTextColor,e=t(this.color,{staticClass:"v-snack__wrapper",class:s["a"].options.computed.classes.call(this),directives:[{name:"show",value:this.isActive}]});return this.$createElement("div",e,[this.genContent(),this.genActions()])},genTransition:function(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout:function(){var t=this;window.clearTimeout(this.activeTimeout);var e=Number(this.timeout);this.isActive&&![0,-1].includes(e)&&(this.activeTimeout=window.setTimeout((function(){t.isActive=!1}),e))}},render:function(t){return t("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},"4bd4":function(t,e,a){"use strict";a("4de4"),a("7db0"),a("4160"),a("caad"),a("07ac"),a("2532"),a("159b");var i=a("5530"),s=a("58df"),n=a("7e2b"),r=a("3206");e["a"]=Object(s["a"])(n["a"],Object(r["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,a=function(t){return t.$watch("hasError",(function(a){e.$set(e.errorBag,t._uid,a)}),{immediate:!0})},i={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",(function(s){s&&(e.errorBag.hasOwnProperty(t._uid)||(i.valid=a(t)))})):i.valid=a(t),i},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var a=this.watchers.find((function(t){return t._uid===e._uid}));a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(i["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},"5b18":function(t,e,a){"use strict";var i=a("f5ef");e["a"]={methods:{notifyPageChanged:function(t){i["a"].$emit("onPageChanged",t)}}}},"974a":function(t,e,a){"use strict";e["a"]={data:function(){return{nameRules:[function(t){return!!t||"Mohon masukkan nama"},function(t){return!!t&&t.length>=10||"Minimal 10 karakter"}],usernameRules:[function(t){return!!t||"Mohon masukkan username"}],nisnRules:[function(t){return!!t||"Mohon masukkan NISN"},function(t){return!!t&&10==t.length||"NISN adalah berjumlah 10 karakter"},function(t){return/^([\s\d]+)$/.test(t)||"Mohon masukkan NISN yang valid"}],phoneNumRules:[function(t){return!!t||"Mohon masukkan no telepon"},function(t){return!!t&&t.length>=10||"Minimal 10 karakter"},function(t){return/\+?([ -]?\d+)+|\(\d+\)([ -]\d+)/.test(t)||"Mohon masukkan nomor telepon yang valid"}],emailRules:[function(t){return!!t||"Mohon masukkan email"},function(t){return/.+@.+/.test(t)||"Alamat email tidak valid"}],originRules:[function(t){return!!t||"Mohon masukkan asal sekolah"}],passwordRules:[function(t){return(t||"").length>=8||"Minimal 8 karakter"},function(t){return/(?=.*[0-9])/.test(t)||"Harus terdapat minimal satu angka"},function(t){return/(?=.*[a-z])/.test(t)||"Harus terdapat minimal satu huruf kecil"},function(t){return/(?=.*[A-Z])/.test(t)||"Harus terdapat minimal satu huruf besar"}]}}}},"98df":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("b0c0");var i=a("d4ec"),s=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"USER",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";Object(i["a"])(this,t),this.name=e,this.username=a,this.nisn=s,this.phone=n,this.email=r,this.origin=o,this.role=u,this.password=l}},a1a9:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"text-h5 font-weight-light black--text"},[t._v(t._s(t.title))])])],1)},s=[],n={name:"PageTitle",props:{title:String}},r=n,o=a("2877"),u=a("6544"),l=a.n(u),c=a("62ad"),d=a("0fd9"),h=Object(o["a"])(r,i,s,!1,null,null,null);e["a"]=h.exports;l()(h,{VCol:c["a"],VRow:d["a"]})},c790:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",[a("PageTitle",{attrs:{title:"Sunting Data Diri dan Akun"}}),a("v-form",{ref:"profileForm",staticClass:"pb-8",model:{value:t.isProfileFormvalid,callback:function(e){t.isProfileFormvalid=e},expression:"isProfileFormvalid"}},[a("h3",[t._v("Data Diri")]),a("v-text-field",{attrs:{label:"Nama",type:"text",value:null==t.userProfile.name?"":t.userProfile.name,rules:this.nameRules,required:""},model:{value:t.userProfile.name,callback:function(e){t.$set(t.userProfile,"name",e)},expression:"userProfile.name"}}),a("v-text-field",{attrs:{label:"Username",type:"text",value:null==t.userProfile.username?"":t.userProfile.username,rules:this.usernameRules,required:""},model:{value:t.userProfile.username,callback:function(e){t.$set(t.userProfile,"username",e)},expression:"userProfile.username"}}),a("v-text-field",{attrs:{label:"Email",type:"email",value:null==t.userProfile.email?"":t.userProfile.email,rules:this.emailRules,required:""},model:{value:t.userProfile.email,callback:function(e){t.$set(t.userProfile,"email",e)},expression:"userProfile.email"}}),a("v-btn",{staticClass:"warning",attrs:{type:"submit",disabled:!t.isProfileFormvalid||t.isEditProfileLoading},on:{click:function(e){return e.preventDefault(),t.editProfile()}}},[t._v("Ubah Data Diri")])],1),a("v-form",{staticClass:"pb-8",model:{value:t.isPasswordFormValid,callback:function(e){t.isPasswordFormValid=e},expression:"isPasswordFormValid"}},[a("h3",[t._v("Ubah Password")]),a("v-text-field",{attrs:{label:"Password Lama",type:"password",required:""},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}}),a("v-text-field",{attrs:{label:"Password Baru",type:"password",rules:this.passwordRules,required:""},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),a("v-text-field",{attrs:{label:"Konfirmasi Password Baru",type:"password",rules:t.getPasswordConfirmationRules,required:""}}),a("v-btn",{staticClass:"warning",attrs:{type:"submit",disabled:!t.isPasswordFormValid||t.isEditPasswordLoading},on:{click:function(e){return e.preventDefault(),t.editPassword()}}},[t._v("Ubah Password")])],1)],1),a("v-snackbar",{attrs:{bottom:!0,timeout:3e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{dark:"",text:""},on:{click:function(e){t.isSnackbarShown=!1}}},"v-btn",i,!1),[t._v("Tutup")])]}}]),model:{value:t.isSnackbarShown,callback:function(e){t.isSnackbarShown=e},expression:"isSnackbarShown"}},[t._v(" "+t._s(t.snackbarMessage)+" ")])],1)},s=[],n=(a("96cf"),a("1da1")),r=a("f5ef"),o=a("98df"),u=a("ef1b"),l=a("974a"),c=a("5b18"),d=a("a1a9"),h={name:"UserProfile",components:{PageTitle:d["a"]},data:function(){return{isProfileFormvalid:!1,isEditProfileLoading:!1,isPasswordFormValid:!1,isEditPasswordLoading:!1,isSnackbarShown:!1,snackbarMessage:"",pageName:"Profil",userProfile:new o["a"],oldPassword:"",newPassword:""}},methods:{emitSessionEnd:function(){r["a"].$emit("onSessionEnd","Sesi berakhir. Mohon login ulang.")},showSnackbar:function(t){this.snackbarMessage=t,this.isSnackbarShown=!0},fetchUserDetail:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$store.dispatch("user/getDetail",t);case 3:i=a.sent,200===i.status&&(e.userProfile=i.data.detail),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),e.isSessionOver?e.emitSessionEnd():e.showSnackbar(e.getDefaultErrorMessage());case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},editProfile:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isEditProfileLoading=!0,e.prev=1,e.next=4,t.$store.dispatch("user/editProfile",t.userProfile);case 4:a=e.sent,200===a.status&&(t.$store.dispatch("auth/update",a.data.result),r["a"].$emit("onProfileUpdated"),t.showSnackbar("Profil berhasil diperbarui.")),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),t.isSessionOver?t.emitSessionEnd():t.showSnackbar(t.getDefaultErrorMessage());case 11:t.isEditProfileLoading=!1;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},editPassword:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isEditPasswordLoading=!0,a={id:t.userProfile.id,oldPassword:t.oldPassword,newPassword:t.newPassword},e.prev=2,e.next=5,t.$store.dispatch("user/editPassword",a);case 5:i=e.sent,200===i.status&&(t.snackbarMessage="Password berhasil diperbarui.",t.isSnackbarShown=!0),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](2),console.log(e.t0.response),t.isSessionOver(e.t0)?t.emitSessionEnd():t.showSnackbar(t.getErrorMessage(e.t0));case 13:t.isEditPasswordLoading=!1;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))()}},computed:{getUserDetail:function(){return this.$store.getters["user/userProfileData"]},getUserId:function(){return this.$store.getters["auth/userId"]},getPasswordConfirmationRules:function(){var t=this;return[function(e){return(!!e&&e)===t.newPassword||"Masukkan password yang sama."}]}},created:function(){this.notifyPageChanged(this.pageName),this.getUserDetail?this.userProfile=this.getUserDetail:this.fetchUserDetail(this.getUserId)},mixins:[l["a"],c["a"],u["a"]]},f=h,m=a("2877"),v=a("6544"),p=a.n(v),g=a("8336"),b=a("a523"),k=a("4bd4"),w=a("2db4"),P=a("8654"),S=Object(m["a"])(f,i,s,!1,null,null,null);e["default"]=S.exports;p()(S,{VBtn:g["a"],VContainer:b["a"],VForm:k["a"],VSnackbar:w["a"],VTextField:P["a"]})},ca71:function(t,e,a){},ef1b:function(t,e,a){"use strict";a("caad"),a("2532");e["a"]={methods:{getDefaultErrorMessage:function(){return"Terjadi galat. Mohon coba kembali."},getErrorMessage:function(t){return t.response.data.message},isSessionOver:function(t){return t.response.data.message.toLowerCase().includes("sesi berakhir")}}}},f5ef:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var i=a("2b0e"),s=new i["a"]}}]);
//# sourceMappingURL=chunk-9e163c2a.3a36dece.js.map