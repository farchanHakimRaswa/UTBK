(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63b5f2ea"],{"021e":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-container",[i("PageTitle",{attrs:{title:"Sunting Data Diri dan Akun"}}),i("v-form",{ref:"profileForm",staticClass:"pb-8",model:{value:e.isProfileFormvalid,callback:function(t){e.isProfileFormvalid=t},expression:"isProfileFormvalid"}},[i("h3",[e._v("Data Diri")]),i("v-text-field",{attrs:{label:"Nama",type:"text",value:null==e.userProfile.name?"":e.userProfile.name,rules:this.nameRules,required:""},model:{value:e.userProfile.name,callback:function(t){e.$set(e.userProfile,"name",t)},expression:"userProfile.name"}}),i("v-text-field",{attrs:{label:"Username",type:"text",value:null==e.userProfile.username?"":e.userProfile.username,rules:this.usernameRules,required:""},model:{value:e.userProfile.username,callback:function(t){e.$set(e.userProfile,"username",t)},expression:"userProfile.username"}}),i("v-text-field",{attrs:{label:"NISN",type:"text",value:null==e.userProfile.nisn?"":e.userProfile.nisn,required:""},model:{value:e.userProfile.nisn,callback:function(t){e.$set(e.userProfile,"nisn",t)},expression:"userProfile.nisn"}}),i("v-text-field",{attrs:{label:"Email",type:"email",value:null==e.userProfile.email?"":e.userProfile.email,rules:this.emailRules,required:""},model:{value:e.userProfile.email,callback:function(t){e.$set(e.userProfile,"email",t)},expression:"userProfile.email"}}),i("v-text-field",{attrs:{label:"Asal Sekolah",type:"text",value:null==e.userProfile.origin?"":e.userProfile.origin,rules:this.originRules,required:""},model:{value:e.userProfile.origin,callback:function(t){e.$set(e.userProfile,"origin",t)},expression:"userProfile.origin"}}),i("v-text-field",{attrs:{label:"No Telepon",type:"text",value:null==e.userProfile.phone?"":e.userProfile.phone,rules:this.phoneNumRules,required:""},model:{value:e.userProfile.phone,callback:function(t){e.$set(e.userProfile,"phone",t)},expression:"userProfile.phone"}}),i("v-btn",{staticClass:"warning",attrs:{type:"submit",disabled:!e.isProfileFormvalid||e.isEditProfileLoading},on:{click:function(t){return t.preventDefault(),e.editProfile()}}},[e._v("Ubah Data Diri")])],1),i("v-form",{staticClass:"pb-8",model:{value:e.isPasswordFormValid,callback:function(t){e.isPasswordFormValid=t},expression:"isPasswordFormValid"}},[i("h3",[e._v("Ubah Password")]),i("v-text-field",{attrs:{label:"Password Lama",type:"password",required:""},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),i("v-text-field",{attrs:{label:"Password Baru",type:"password",rules:this.passwordRules,required:""},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),i("v-text-field",{attrs:{label:"Konfirmasi Password Baru",type:"password",rules:e.getPasswordConfirmationRules,required:""}}),i("v-btn",{staticClass:"warning",attrs:{type:"submit",disabled:!e.isPasswordFormValid||e.isEditPasswordLoading},on:{click:function(t){return t.preventDefault(),e.editPassword()}}},[e._v("Ubah Password")])],1)],1),i("v-snackbar",{attrs:{bottom:!0,timeout:3e3},scopedSlots:e._u([{key:"action",fn:function(t){var s=t.attrs;return[i("v-btn",e._b({attrs:{dark:"",text:""},on:{click:function(t){e.isSnackbarShown=!1}}},"v-btn",s,!1),[e._v("Tutup")])]}}]),model:{value:e.isSnackbarShown,callback:function(t){e.isSnackbarShown=t},expression:"isSnackbarShown"}},[e._v(" "+e._s(e.snackbarMessage)+" ")])],1)},a=[],n=(i("96cf"),i("1da1")),r=i("f5ef"),o=i("98df"),u=i("ef1b"),l=i("974a"),c=i("5b18"),d=i("9d7e"),h={name:"UserProfile",components:{PageTitle:d["a"]},data:function(){return{isProfileFormvalid:!1,isEditProfileLoading:!1,isPasswordFormValid:!1,isEditPasswordLoading:!1,isSnackbarShown:!1,snackbarMessage:"",pageName:"Profil",userProfile:new o["a"],oldPassword:"",newPassword:""}},methods:{emitSessionEnd:function(){r["a"].$emit("onSessionEnd","Sesi berakhir. Mohon login ulang.")},showSnackbar:function(e){this.snackbarMessage=e,this.isSnackbarShown=!0},fetchUserDetail:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.$store.dispatch("user/getDetail",e);case 3:s=i.sent,200===s.status&&(t.userProfile=s.data.detail),i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](0),t.isSessionOver?t.emitSessionEnd():t.showSnackbar(t.getDefaultErrorMessage());case 10:case"end":return i.stop()}}),i,null,[[0,7]])})))()},editProfile:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isEditProfileLoading=!0,t.prev=1,t.next=4,e.$store.dispatch("user/editProfile",e.userProfile);case 4:i=t.sent,200===i.status&&(e.$store.dispatch("auth/update",i.data.result),r["a"].$emit("onProfileUpdated"),e.showSnackbar("Profil berhasil diperbarui.")),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.isSessionOver?e.emitSessionEnd():e.showSnackbar(e.getDefaultErrorMessage());case 11:e.isEditProfileLoading=!1;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},editPassword:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isEditPasswordLoading=!0,i={id:e.userProfile.id,oldPassword:e.oldPassword,newPassword:e.newPassword},t.prev=2,t.next=5,e.$store.dispatch("user/editPassword",i);case 5:s=t.sent,200===s.status&&(e.snackbarMessage="Password berhasil diperbarui.",e.isSnackbarShown=!0),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log(t.t0.response),e.isSessionOver(t.t0)?e.emitSessionEnd():e.showSnackbar(e.getErrorMessage(t.t0));case 13:e.isEditPasswordLoading=!1;case 14:case"end":return t.stop()}}),t,null,[[2,9]])})))()}},computed:{getUserDetail:function(){return this.$store.getters["user/userProfileData"]},getUserId:function(){return this.$store.getters["auth/userId"]},getPasswordConfirmationRules:function(){var e=this;return[function(t){return(!!t&&t)===e.newPassword||"Masukkan password yang sama."}]}},created:function(){this.notifyPageChanged(this.pageName),this.getUserDetail?this.userProfile=this.getUserDetail:this.fetchUserDetail(this.getUserId)},mixins:[l["a"],c["a"],u["a"]]},f=h,m=i("2877"),v=i("6544"),p=i.n(v),g=i("8336"),b=i("a523"),k=i("4bd4"),w=i("2db4"),P=i("8654"),x=Object(m["a"])(f,s,a,!1,null,null,null);t["default"]=x.exports;p()(x,{VBtn:g["a"],VContainer:b["a"],VForm:k["a"],VSnackbar:w["a"],VTextField:P["a"]})},"2db4":function(e,t,i){"use strict";i("caad"),i("a9e3");var s=i("ade3"),a=(i("ca71"),i("8dd9")),n=i("a9ad"),r=i("7560"),o=i("f2e7"),u=i("fe6c"),l=i("58df"),c=i("80d2"),d=i("d9bd");t["a"]=Object(l["a"])(a["a"],n["a"],o["a"],Object(u["b"])(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:function(e){return"string"===typeof e||!1===e}},vertical:Boolean},data:function(){return{activeTimeout:-1}},computed:{classes:function(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground:function(){return!this.text&&!this.outlined},isDark:function(){return this.hasBackground?!this.light:r["a"].options.computed.isDark.call(this)},styles:function(){if(this.absolute)return{};var e=this.$vuetify.application,t=e.bar,i=e.bottom,s=e.footer,a=e.insetFooter,n=e.left,r=e.right,o=e.top;return{paddingBottom:Object(c["g"])(i+s+a),paddingLeft:this.app?Object(c["g"])(n):void 0,paddingRight:this.app?Object(c["g"])(r):void 0,paddingTop:Object(c["g"])(t+o)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted:function(){this.isActive&&this.setTimeout()},created:function(){this.$attrs.hasOwnProperty("auto-height")&&Object(d["e"])("auto-height",this),0==this.timeout&&Object(d["d"])('timeout="0"',"-1",this)},methods:{genActions:function(){return this.$createElement("div",{staticClass:"v-snack__action "},[Object(c["r"])(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent:function(){return this.$createElement("div",{staticClass:"v-snack__content",class:Object(s["a"])({},this.contentClass,!0),attrs:{role:"status","aria-live":"polite"}},[Object(c["r"])(this)])},genWrapper:function(){var e=this.hasBackground?this.setBackgroundColor:this.setTextColor,t=e(this.color,{staticClass:"v-snack__wrapper",class:a["a"].options.computed.classes.call(this),directives:[{name:"show",value:this.isActive}]});return this.$createElement("div",t,[this.genContent(),this.genActions()])},genTransition:function(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout:function(){var e=this;window.clearTimeout(this.activeTimeout);var t=Number(this.timeout);this.isActive&&![0,-1].includes(t)&&(this.activeTimeout=window.setTimeout((function(){e.isActive=!1}),t))}},render:function(e){return e("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},"4bd4":function(e,t,i){"use strict";i("4de4"),i("7db0"),i("4160"),i("caad"),i("07ac"),i("2532"),i("159b");var s=i("5530"),a=i("58df"),n=i("7e2b"),r=i("3206");t["a"]=Object(a["a"])(n["a"],Object(r["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(e){var t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(e){var t=this,i=function(e){return e.$watch("hasError",(function(i){t.$set(t.errorBag,e._uid,i)}),{immediate:!0})},s={_uid:e._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?s.shouldValidate=e.$watch("shouldValidate",(function(a){a&&(t.errorBag.hasOwnProperty(e._uid)||(s.valid=i(e)))})):s.valid=i(e),s},validate:function(){return 0===this.inputs.filter((function(e){return!e.validate(!0)})).length},reset:function(){this.inputs.forEach((function(e){return e.reset()})),this.resetErrorBag()},resetErrorBag:function(){var e=this;this.lazyValidation&&setTimeout((function(){e.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(e){return e.resetValidation()})),this.resetErrorBag()},register:function(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister:function(e){var t=this.inputs.find((function(t){return t._uid===e._uid}));if(t){var i=this.watchers.find((function(e){return e._uid===t._uid}));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((function(e){return e._uid!==t._uid})),this.inputs=this.inputs.filter((function(e){return e._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(e){var t=this;return e("form",{staticClass:"v-form",attrs:Object(s["a"])({novalidate:!0},this.attrs$),on:{submit:function(e){return t.$emit("submit",e)}}},this.$slots.default)}})},"5b18":function(e,t,i){"use strict";var s=i("f5ef");t["a"]={methods:{notifyPageChanged:function(e){s["a"].$emit("onPageChanged",e)}}}},"974a":function(e,t,i){"use strict";t["a"]={data:function(){return{nameRules:[function(e){return!!e||"Mohon masukkan nama"},function(e){return!!e&&e.length>=10||"Minimal 10 karakter"}],usernameRules:[function(e){return!!e||"Mohon masukkan username"}],nisnRules:[function(e){return!!e||"Mohon masukkan NISN"},function(e){return!!e&&10==e.length||"NISN adalah berjumlah 10 karakter"},function(e){return/^([\s\d]+)$/.test(e)||"Mohon masukkan NISN yang valid"}],phoneNumRules:[function(e){return!!e||"Mohon masukkan no telepon"},function(e){return!!e&&e.length>=10||"Minimal 10 karakter"},function(e){return/\+?([ -]?\d+)+|\(\d+\)([ -]\d+)/.test(e)||"Mohon masukkan nomor telepon yang valid"}],emailRules:[function(e){return!!e||"Mohon masukkan email"},function(e){return/.+@.+/.test(e)||"Alamat email tidak valid"}],originRules:[function(e){return!!e||"Mohon masukkan asal sekolah"}],passwordRules:[function(e){return(e||"").length>=8||"Minimal 8 karakter"},function(e){return/(?=.*[0-9])/.test(e)||"Harus terdapat minimal satu angka"},function(e){return/(?=.*[a-z])/.test(e)||"Harus terdapat minimal satu huruf kecil"},function(e){return/(?=.*[A-Z])/.test(e)||"Harus terdapat minimal satu huruf besar"}]}}}},"98df":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("b0c0");var s=i("d4ec"),a=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"USER",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";Object(s["a"])(this,e),this.name=t,this.username=i,this.nisn=a,this.phone=n,this.email=r,this.origin=o,this.role=u,this.password=l}},"9d7e":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("div",{staticClass:"text-h5 font-weight-light black--text"},[e._v(e._s(e.title))])])],1)},a=[],n={name:"PageTitle",props:{title:String}},r=n,o=i("2877"),u=i("6544"),l=i.n(u),c=i("62ad"),d=i("0fd9"),h=Object(o["a"])(r,s,a,!1,null,null,null);t["a"]=h.exports;l()(h,{VCol:c["a"],VRow:d["a"]})},ca71:function(e,t,i){},ef1b:function(e,t,i){"use strict";i("caad"),i("2532");t["a"]={methods:{getDefaultErrorMessage:function(){return"Terjadi galat. Mohon coba kembali."},getErrorMessage:function(e){return e.response.data.message},isSessionOver:function(e){return e.response.data.message.toLowerCase().includes("sesi berakhir")}}}},f5ef:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("2b0e"),a=new s["a"]}}]);
//# sourceMappingURL=chunk-63b5f2ea.734ead32.js.map